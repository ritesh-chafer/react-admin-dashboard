{"ast":null,"code":"import _defineProperty from \"/home/chafer/Desktop/Project/Reactjs/react-admin-template-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/chafer/Desktop/Project/Reactjs/react-admin-template-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/chafer/Desktop/Project/Reactjs/react-admin-template-master/src/components/Products/ProductsForm.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, Fragment } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { ProductModificationStatus } from \"../../store/models/product.interface\";\nimport TextInput from \"../../common/components/TextInput\";\nimport { editProduct, clearSelectedProduct, setModificationState, addProduct } from \"../../store/actions/products.action\";\nimport { addNotification } from \"../../store/actions/notifications.action\";\nimport NumberInput from \"../../common/components/NumberInput\";\nimport Checkbox from \"../../common/components/Checkbox\";\nimport SelectInput from \"../../common/components/Select\";\n\nconst ProductForm = () => {\n  const dispatch = useDispatch();\n  const products = useSelector(state => state.products);\n  let product = products.selectedProduct;\n  const isCreate = products.modificationState === ProductModificationStatus.Create;\n\n  if (!product || isCreate) {\n    product = {\n      id: 0,\n      name: \"\",\n      description: \"\",\n      amount: 0,\n      price: 0,\n      hasExpiryDate: false,\n      category: \"\"\n    };\n  }\n\n  const _useState = useState({\n    name: {\n      error: \"\",\n      value: product.name\n    },\n    description: {\n      error: \"\",\n      value: product.description\n    },\n    amount: {\n      error: \"\",\n      value: product.amount\n    },\n    price: {\n      error: \"\",\n      value: product.price\n    },\n    hasExpiryDate: {\n      error: \"\",\n      value: product.hasExpiryDate\n    },\n    category: {\n      error: \"\",\n      value: product.category\n    }\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        formState = _useState2[0],\n        setFormState = _useState2[1];\n\n  function hasFormValueChanged(model) {\n    setFormState(_objectSpread({}, formState, {\n      [model.field]: {\n        error: model.error,\n        value: model.value\n      }\n    }));\n  }\n\n  function saveUser(e) {\n    e.preventDefault();\n\n    if (isFormInvalid()) {\n      return;\n    }\n\n    let saveUserFn = isCreate ? addProduct : editProduct;\n    saveForm(formState, saveUserFn);\n  }\n\n  function saveForm(formState, saveFn) {\n    if (product) {\n      dispatch(saveFn(_objectSpread({}, product, {\n        name: formState.name.value,\n        description: formState.description.value,\n        price: formState.price.value,\n        amount: formState.amount.value,\n        hasExpiryDate: formState.hasExpiryDate.value,\n        category: formState.category.value\n      })));\n      dispatch(addNotification(\"Product edited\", \"Product \".concat(formState.name.value, \" edited by you\")));\n      dispatch(clearSelectedProduct());\n      dispatch(setModificationState(ProductModificationStatus.None));\n    }\n  }\n\n  function cancelForm() {\n    dispatch(setModificationState(ProductModificationStatus.None));\n  }\n\n  function getDisabledClass() {\n    let isError = isFormInvalid();\n    return isError ? \"disabled\" : \"\";\n  }\n\n  function isFormInvalid() {\n    return formState.amount.error || formState.description.error || formState.name.error || formState.price.error || formState.hasExpiryDate.error || formState.category.error || !formState.name.value || !formState.category.value;\n  }\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-xl-7 col-lg-7\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card shadow mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card-header py-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    className: \"m-0 font-weight-bold text-green\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Product \", isCreate ? \"create\" : \"edit\")), React.createElement(\"div\", {\n    className: \"card-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: saveUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group col-md-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(TextInput, {\n    id: \"input_email\",\n    value: formState.name.value,\n    field: \"name\",\n    onChange: hasFormValueChanged,\n    required: true,\n    maxLength: 20,\n    label: \"Name\",\n    placeholder: \"Name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group col-md-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(SelectInput, {\n    id: \"input_category\",\n    field: \"category\",\n    label: \"Category\",\n    options: [\"Fruit\", \"Sweet\", \"Kitchen\"],\n    required: true,\n    onChange: hasFormValueChanged,\n    value: formState.category.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(TextInput, {\n    id: \"input_description\",\n    field: \"description\",\n    value: formState.description.value,\n    onChange: hasFormValueChanged,\n    required: false,\n    maxLength: 100,\n    label: \"Description\",\n    placeholder: \"Description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group col-md-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(NumberInput, {\n    id: \"input_amount\",\n    value: formState.amount.value,\n    field: \"amount\",\n    onChange: hasFormValueChanged,\n    max: 1000,\n    min: 0,\n    label: \"Amount\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group col-md-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(NumberInput, {\n    id: \"input_price\",\n    value: formState.price.value,\n    field: \"price\",\n    onChange: hasFormValueChanged,\n    max: 1000,\n    min: 0,\n    label: \"Price\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(Checkbox, {\n    id: \"checkbox_expiry\",\n    field: \"hasExpiryDate\",\n    value: formState.hasExpiryDate.value,\n    label: \"Has expiry date\",\n    onChange: hasFormValueChanged,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btn btn-danger\",\n    onClick: () => cancelForm(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \"Cancel\"), React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-success left-margin \".concat(getDisabledClass()),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"Save\"))))));\n};\n\nexport default ProductForm;","map":{"version":3,"sources":["/home/chafer/Desktop/Project/Reactjs/react-admin-template-master/src/components/Products/ProductsForm.tsx"],"names":["React","useState","Fragment","useSelector","useDispatch","ProductModificationStatus","TextInput","editProduct","clearSelectedProduct","setModificationState","addProduct","addNotification","NumberInput","Checkbox","SelectInput","ProductForm","dispatch","products","state","product","selectedProduct","isCreate","modificationState","Create","id","name","description","amount","price","hasExpiryDate","category","error","value","formState","setFormState","hasFormValueChanged","model","field","saveUser","e","preventDefault","isFormInvalid","saveUserFn","saveForm","saveFn","None","cancelForm","getDisabledClass","isError"],"mappings":"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","sourcesContent":["import React, { useState, FormEvent, Dispatch, Fragment } from \"react\";\nimport { IStateType, IProductState } from \"../../store/models/root.interface\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { IProduct, ProductModificationStatus } from \"../../store/models/product.interface\";\nimport TextInput from \"../../common/components/TextInput\";\nimport { editProduct, clearSelectedProduct, setModificationState, addProduct } from \"../../store/actions/products.action\";\nimport { addNotification } from \"../../store/actions/notifications.action\";\nimport NumberInput from \"../../common/components/NumberInput\";\nimport Checkbox from \"../../common/components/Checkbox\";\nimport SelectInput from \"../../common/components/Select\";\nimport { OnChangeModel, IProductFormState } from \"../../common/types/Form.types\";\n\nconst ProductForm: React.FC = () => {\n  const dispatch: Dispatch<any> = useDispatch();\n  const products: IProductState | null = useSelector((state: IStateType) => state.products);\n  let product: IProduct | null = products.selectedProduct;\n  const isCreate: boolean = (products.modificationState === ProductModificationStatus.Create);\n  \n  if (!product || isCreate) {\n    product = { id: 0, name: \"\", description: \"\", amount: 0, price: 0, hasExpiryDate: false, category: \"\" };\n  }\n\n  const [formState, setFormState] = useState({\n    name: { error: \"\", value: product.name },\n    description: { error: \"\", value: product.description },\n    amount: { error: \"\", value: product.amount },\n    price: { error: \"\", value: product.price },\n    hasExpiryDate: { error: \"\", value: product.hasExpiryDate },\n    category: { error: \"\", value: product.category }\n  });\n\n  function hasFormValueChanged(model: OnChangeModel): void {\n    setFormState({ ...formState, [model.field]: { error: model.error, value: model.value } });\n  }\n\n  function saveUser(e: FormEvent<HTMLFormElement>): void {\n    e.preventDefault();\n    if (isFormInvalid()) {\n      return;\n    }\n\n    let saveUserFn: Function = (isCreate) ? addProduct : editProduct;\n    saveForm(formState, saveUserFn);\n  }\n\n  function saveForm(formState: IProductFormState, saveFn: Function): void {\n    if (product) {\n      dispatch(saveFn({\n        ...product,\n        name: formState.name.value,\n        description: formState.description.value,\n        price: formState.price.value,\n        amount: formState.amount.value,\n        hasExpiryDate: formState.hasExpiryDate.value,\n        category: formState.category.value\n      }));\n\n      dispatch(addNotification(\"Product edited\", `Product ${formState.name.value} edited by you`));\n      dispatch(clearSelectedProduct());\n      dispatch(setModificationState(ProductModificationStatus.None));\n    }\n  }\n\n  function cancelForm(): void {\n    dispatch(setModificationState(ProductModificationStatus.None));\n  }\n\n  function getDisabledClass(): string {\n    let isError: boolean = isFormInvalid();\n    return isError ? \"disabled\" : \"\";\n  }\n\n  function isFormInvalid(): boolean {\n    return (formState.amount.error || formState.description.error\n      || formState.name.error || formState.price.error || formState.hasExpiryDate.error\n      || formState.category.error || !formState.name.value || !formState.category.value) as boolean;\n}\n\n  return (\n    <Fragment>\n      <div className=\"col-xl-7 col-lg-7\">\n        <div className=\"card shadow mb-4\">\n          <div className=\"card-header py-3\">\n            <h6 className=\"m-0 font-weight-bold text-green\">Product {(isCreate ? \"create\" : \"edit\")}</h6>\n          </div>\n          <div className=\"card-body\">\n            <form onSubmit={saveUser}>\n              <div className=\"form-row\">\n                <div className=\"form-group col-md-6\">\n                  <TextInput id=\"input_email\"\n                    value={formState.name.value}\n                    field=\"name\"\n                    onChange={hasFormValueChanged}\n                    required={true}\n                    maxLength={20}\n                    label=\"Name\"\n                    placeholder=\"Name\" />\n                </div>\n                <div className=\"form-group col-md-6\">\n                  <SelectInput\n                    id=\"input_category\"\n                    field=\"category\"\n                    label=\"Category\"\n                    options={[\"Fruit\", \"Sweet\", \"Kitchen\"]}\n                    required={true}\n                    onChange={hasFormValueChanged}\n                    value={formState.category.value}\n                  />\n                </div>\n              </div>\n              <div className=\"form-group\">\n                <TextInput id=\"input_description\"\n                field = \"description\"\n                  value={formState.description.value}\n                  onChange={hasFormValueChanged}\n                  required={false}\n                  maxLength={100}\n                  label=\"Description\"\n                  placeholder=\"Description\" />\n              </div>\n              <div className=\"form-row\">\n                <div className=\"form-group col-md-6\">\n                  <NumberInput id=\"input_amount\"\n                    value={formState.amount.value}\n                    field=\"amount\"\n                    onChange={hasFormValueChanged}\n                    max={1000}\n                    min={0}\n                    label=\"Amount\" />\n                </div>\n                <div className=\"form-group col-md-6\">\n                  <NumberInput id=\"input_price\"\n                    value={formState.price.value}\n                    field=\"price\"\n                    onChange={hasFormValueChanged}\n                    max={1000}\n                    min={0}\n                    label=\"Price\" />\n                </div>\n              </div>\n              <div className=\"form-group\">\n                <Checkbox\n                  id=\"checkbox_expiry\"\n                  field=\"hasExpiryDate\"\n                  value={formState.hasExpiryDate.value}\n                  label=\"Has expiry date\"\n                  onChange={hasFormValueChanged}\n                />\n              </div>\n              <button className=\"btn btn-danger\" onClick={() => cancelForm()}>Cancel</button>\n              <button type=\"submit\" className={`btn btn-success left-margin ${getDisabledClass()}`}>Save</button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default ProductForm;\n"]},"metadata":{},"sourceType":"module"}