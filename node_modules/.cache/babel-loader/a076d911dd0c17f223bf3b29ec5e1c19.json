{"ast":null,"code":"import _slicedToArray from \"/home/chafer/Desktop/Project/Reactjs/react-admin-template-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/chafer/Desktop/Project/Reactjs/react-admin-template-master/src/components/Products/Products.tsx\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport ProductList from \"./ProductsList\";\nimport ProductForm from \"./ProductsForm\";\nimport TopCard from \"../../common/components/TopCard\";\nimport \"./Products.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateCurrentPath } from \"../../store/actions/root.actions\";\nimport Popup from \"reactjs-popup\";\nimport { removeProduct, clearSelectedProduct, setModificationState, changeSelectedProduct } from \"../../store/actions/products.action\";\nimport { addNotification } from \"../../store/actions/notifications.action\";\nimport { ProductModificationStatus } from \"../../store/models/product.interface\";\n\nconst Products = () => {\n  const dispatch = useDispatch();\n  const products = useSelector(state => state.products);\n  const path = useSelector(state => state.root.page);\n  const numberItemsCount = products.products.length;\n  const totalPrice = products.products.reduce((prev, next) => prev + (next.price * next.amount || 0), 0);\n  const totalAmount = products.products.reduce((prev, next) => prev + (next.amount || 0), 0);\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        popup = _useState2[0],\n        setPopup = _useState2[1];\n\n  useEffect(() => {\n    dispatch(clearSelectedProduct());\n    dispatch(updateCurrentPath(\"products\", \"list\"));\n  }, [path.area, dispatch]);\n\n  function onProductSelect(product) {\n    dispatch(changeSelectedProduct(product));\n    dispatch(setModificationState(ProductModificationStatus.None));\n  }\n\n  function onProductRemove() {\n    if (products.selectedProduct) {\n      setPopup(true);\n    }\n  }\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"h3 mb-2 text-gray-800\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Products\"), React.createElement(\"p\", {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Products here\"), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(TopCard, {\n    title: \"PRODUCT COUNT\",\n    text: \"\".concat(numberItemsCount),\n    icon: \"box\",\n    class: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), React.createElement(TopCard, {\n    title: \"PRODUCT AMOUNT\",\n    text: \"\".concat(totalAmount),\n    icon: \"warehouse\",\n    class: \"danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), React.createElement(TopCard, {\n    title: \"SUMMARY PRICE\",\n    text: \"$\".concat(totalPrice),\n    icon: \"dollar-sign\",\n    class: \"success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-xl-12 col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card shadow mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card-header py-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    className: \"m-0 font-weight-bold text-green\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Product List\"), React.createElement(\"div\", {\n    className: \"header-buttons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-success btn-green\",\n    onClick: () => dispatch(setModificationState(ProductModificationStatus.Create)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa fa-plus\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btn btn-success btn-blue\",\n    onClick: () => dispatch(setModificationState(ProductModificationStatus.Edit)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa fa-pen\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btn btn-success btn-red\",\n    onClick: () => onProductRemove(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa fa-times\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  })))), React.createElement(\"div\", {\n    className: \"card-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(ProductList, {\n    onSelect: onProductSelect,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })))), products.modificationState === ProductModificationStatus.Create || products.modificationState === ProductModificationStatus.Edit && products.selectedProduct ? React.createElement(ProductForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }) : null), React.createElement(Popup, {\n    className: \"popup-modal\",\n    open: popup,\n    onClose: () => setPopup(false),\n    closeOnDocumentClick: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"popup-modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"popup-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Are you sure?\"), React.createElement(\"div\", {\n    className: \"popup-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-danger\",\n    onClick: () => {\n      if (!products.selectedProduct) {\n        return;\n      }\n\n      dispatch(addNotification(\"Product removed\", \"Product \".concat(products.selectedProduct.name, \" was removed\")));\n      dispatch(removeProduct(products.selectedProduct.id));\n      dispatch(clearSelectedProduct());\n      setPopup(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Remove\")))));\n};\n\nexport default Products;","map":{"version":3,"sources":["/home/chafer/Desktop/Project/Reactjs/react-admin-template-master/src/components/Products/Products.tsx"],"names":["React","Fragment","useState","useEffect","ProductList","ProductForm","TopCard","useDispatch","useSelector","updateCurrentPath","Popup","removeProduct","clearSelectedProduct","setModificationState","changeSelectedProduct","addNotification","ProductModificationStatus","Products","dispatch","products","state","path","root","page","numberItemsCount","length","totalPrice","reduce","prev","next","price","amount","totalAmount","popup","setPopup","area","onProductSelect","product","None","onProductRemove","selectedProduct","Create","Edit","modificationState","name","id"],"mappings":"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","sourcesContent":["import React, { Fragment, Dispatch, useState, useEffect } from \"react\";\nimport ProductList from \"./ProductsList\";\nimport ProductForm from \"./ProductsForm\";\nimport TopCard from \"../../common/components/TopCard\";\nimport \"./Products.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateCurrentPath } from \"../../store/actions/root.actions\";\nimport { IProductState, IStateType, IRootPageStateType } from \"../../store/models/root.interface\";\nimport Popup from \"reactjs-popup\";\nimport { removeProduct, clearSelectedProduct, setModificationState,\n  changeSelectedProduct } from \"../../store/actions/products.action\";\nimport { addNotification } from \"../../store/actions/notifications.action\";\nimport { ProductModificationStatus, IProduct } from \"../../store/models/product.interface\";\n\nconst Products: React.FC = () => {\n  const dispatch: Dispatch<any> = useDispatch();\n  const products: IProductState = useSelector((state: IStateType) => state.products);\n  const path: IRootPageStateType = useSelector((state: IStateType) => state.root.page);\n  const numberItemsCount: number = products.products.length;\n  const totalPrice: number = products.products.reduce((prev, next) => prev + ((next.price * next.amount) || 0), 0);\n  const totalAmount: number = products.products.reduce((prev, next) => prev + (next.amount || 0), 0);\n  const [popup, setPopup] = useState(false);\n\n  useEffect(() => {\n    dispatch(clearSelectedProduct());\n    dispatch(updateCurrentPath(\"products\", \"list\"));\n  }, [path.area, dispatch]);\n\n  function onProductSelect(product: IProduct): void {\n    dispatch(changeSelectedProduct(product));\n    dispatch(setModificationState(ProductModificationStatus.None));\n  }\n\n  function onProductRemove() {\n    if(products.selectedProduct) {\n      setPopup(true);\n    }\n  }\n\n  return (\n    <Fragment>\n      <h1 className=\"h3 mb-2 text-gray-800\">Products</h1>\n      <p className=\"mb-4\">Products here</p>\n      <div className=\"row\">\n        <TopCard title=\"PRODUCT COUNT\" text={`${numberItemsCount}`} icon=\"box\" class=\"primary\" />\n        <TopCard title=\"PRODUCT AMOUNT\" text={`${totalAmount}`} icon=\"warehouse\" class=\"danger\" />\n        <TopCard title=\"SUMMARY PRICE\" text={`$${totalPrice}`} icon=\"dollar-sign\" class=\"success\" />\n      </div>\n\n      <div className=\"row\">\n        <div className=\"col-xl-12 col-lg-12\">\n          <div className=\"card shadow mb-4\">\n            <div className=\"card-header py-3\">\n              <h6 className=\"m-0 font-weight-bold text-green\">Product List</h6>\n              <div className=\"header-buttons\">\n                <button className=\"btn btn-success btn-green\" onClick={() =>\n                  dispatch(setModificationState(ProductModificationStatus.Create))}>\n                  <i className=\"fas fa fa-plus\"></i>\n                </button>\n                <button className=\"btn btn-success btn-blue\" onClick={() =>\n                  dispatch(setModificationState(ProductModificationStatus.Edit))}>\n                  <i className=\"fas fa fa-pen\"></i>\n                </button>\n                <button className=\"btn btn-success btn-red\" onClick={() => onProductRemove()}>\n                  <i className=\"fas fa fa-times\"></i>\n                </button>\n              </div>\n            </div>\n            <div className=\"card-body\">\n              <ProductList\n                onSelect={onProductSelect}\n              />\n            </div>\n          </div>\n        </div>\n        {((products.modificationState === ProductModificationStatus.Create)\n          || (products.modificationState === ProductModificationStatus.Edit && products.selectedProduct)) ?\n          <ProductForm /> : null}\n      </div>\n\n\n      <Popup\n        className=\"popup-modal\"\n        open={popup}\n        onClose={() => setPopup(false)}\n        closeOnDocumentClick\n      >\n        <div className=\"popup-modal\">\n          <div className=\"popup-title\">\n            Are you sure?\n          </div>\n          <div className=\"popup-content\">\n            <button type=\"button\"\n              className=\"btn btn-danger\"\n              onClick={() => {\n                if (!products.selectedProduct) {\n                  return;\n                }\n                dispatch(addNotification(\"Product removed\", `Product ${products.selectedProduct.name} was removed`));\n                dispatch(removeProduct(products.selectedProduct.id));\n                dispatch(clearSelectedProduct());\n                setPopup(false);\n              }}>Remove\n              </button>\n          </div>\n        </div>\n      </Popup>\n    </Fragment >\n  );\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}